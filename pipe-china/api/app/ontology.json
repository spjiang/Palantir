{
    "entities": [
      {"name": "管段", "label": "PipelineSegment", "props": {}},
      {"name": "传感器", "label": "Sensor", "props": {"type": "压力/流量"}},
      {"name": "告警", "label": "Alarm", "props": {"type": "压力异常/流量异常"}},
      {"name": "风险状态", "label": "RiskState", "props": {"value": "正常/疑似泄漏/确认泄漏"}},
      {"name": "运维任务", "label": "MaintenanceTask", "props": {"type": "巡检/处置"}},
      {"name": "证据", "label": "Evidence", "props": {"type": "定位/照片"}},
      {"name": "事件", "label": "Incident", "props": {}},
      {"name": "异常识别记录", "label": "Artifact", "props": {}},
      {"name": "正常", "label": "State", "props": {}},
      {"name": "疑似泄漏", "label": "State", "props": {}},
      {"name": "确认泄漏", "label": "State", "props": {}}
    ],
    "relations": [
      {"type": "has_sensor", "src": "管段", "dst": "传感器", "props": {}},
      {"type": "related_to", "src": "告警", "dst": "管段", "props": {}},
      {"type": "has_risk_state", "src": "管段", "dst": "风险状态", "props": {}},
      {"type": "targets", "src": "运维任务", "dst": "管段", "props": {}},
      {"type": "has_evidence", "src": "运维任务", "dst": "证据", "props": {}},
      {"type": "contains", "src": "事件", "dst": "告警", "props": {}},
      {"type": "contains", "src": "事件", "dst": "运维任务", "props": {}},
      {"type": "contains", "src": "事件", "dst": "证据", "props": {}}
    ],
    "behaviors": [
      {
        "name": "异常识别",
        "preconditions": ["传感器监测到压力异常或流量异常"],
        "affects": ["管段"],
        "state_from": "正常",
        "state_to": "疑似泄漏",
        "produces": ["异常识别记录"],
        "inputs": ["传感器数据", "告警"],
        "outputs": ["异常识别记录"],
        "effects": ["管段风险状态变为疑似泄漏"],
        "desc": "基于传感器异常数据识别管段潜在泄漏风险"
      },
      {
        "name": "处置决策",
        "preconditions": ["管段风险状态为疑似泄漏"],
        "affects": ["管段"],
        "state_from": "疑似泄漏",
        "state_to": "疑似泄漏",
        "produces": ["运维任务"],
        "inputs": ["异常识别记录"],
        "outputs": ["运维任务"],
        "effects": ["生成巡检任务"],
        "desc": "根据疑似泄漏状态决策并生成巡检任务"
      },
      {
        "name": "执行与回写",
        "preconditions": ["存在关联管段的巡检任务", "任务已收集定位和照片证据"],
        "affects": ["运维任务", "管段"],
        "state_from": "疑似泄漏",
        "state_to": "确认泄漏",
        "produces": [],
        "inputs": ["运维任务", "证据"],
        "outputs": [],
        "effects": ["管段风险状态根据证据充分性迁移"],
        "desc": "执行巡检任务并根据证据回写管段风险状态"
      }
    ],
    "rules": [
      {
        "name": "触发异常识别规则",
        "behavior": "异常识别",
        "trigger": "压力传感器读数超过阈值或流量传感器读数异常波动",
        "action": "创建异常识别记录并更新管段状态为疑似泄漏",
        "approval_required": false,
        "sla_minutes": 5,
        "required_evidence": ["压力异常告警", "流量异常告警"],
        "forbids": [],
        "allows": ["处置决策"],
        "involves": ["管段", "传感器", "告警"]
      },
      {
        "name": "触发处置决策规则",
        "behavior": "处置决策",
        "trigger": "管段风险状态变为疑似泄漏",
        "action": "创建巡检任务并指派",
        "approval_required": true,
        "sla_minutes": 30,
        "required_evidence": ["异常识别记录"],
        "forbids": [],
        "allows": ["执行与回写"],
        "involves": ["管段", "运维任务"]
      },
      {
        "name": "触发执行回写规则（证据充分）",
        "behavior": "执行与回写",
        "trigger": "巡检任务完成且证据（定位、照片）充分确认泄漏",
        "action": "更新管段风险状态为确认泄漏并关闭任务",
        "approval_required": false,
        "sla_minutes": 60,
        "required_evidence": ["定位证据", "照片证据"],
        "forbids": [],
        "allows": [],
        "involves": ["运维任务", "管段", "证据"]
      },
      {
        "name": "触发执行回写规则（证据不足）",
        "behavior": "执行与回写",
        "trigger": "巡检任务完成但证据不足",
        "action": "更新管段风险状态为正常并关闭任务",
        "approval_required": false,
        "sla_minutes": 60,
        "required_evidence": ["定位证据", "照片证据"],
        "forbids": [],
        "allows": [],
        "involves": ["运维任务", "管段", "证据"]
      }
    ],
    "state_transitions": [
      {"object": "管段", "from": "正常", "to": "疑似泄漏", "via": "异常识别"},
      {"object": "管段", "from": "疑似泄漏", "to": "确认泄漏", "via": "执行与回写"},
      {"object": "管段", "from": "疑似泄漏", "to": "正常", "via": "执行与回写"}
    ]
  }