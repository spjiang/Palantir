# 管网单点运维本体场景定义（中文为主）
## 场景：管道泄漏风险识别与处置（单管段）

---

## 1. 场景说明（Scene）

- 场景目标：  
  识别管段泄漏风险，并通过运维处置确认风险状态。

- 场景范围：  
  单一管段的泄漏识别与处置闭环。

---

## 2. 对象定义（Object）

### 2.1 核心对象

- 管段（PipelineSegment）  
  运维和风险判断的核心对象（本场景所有关键行为均以管段为核心作用对象）。

- 风险状态（RiskState）  
  描述管段在某一时刻的风险形态（通过关系挂载到管段）。

### 2.2 感知对象

- 传感器（Sensor）  
  类型：压力、流量（用于采集管段运行数据并触发告警）。

- 告警（Alarm）  
  类型：压力异常、流量异常（由传感器异常触发或系统识别生成）。

### 2.3 执行与验证对象

- 运维任务（MaintenanceTask）  
  类型：巡检任务（用于现场核查与处置）。

- 证据（Evidence）  
  类型：定位信息、现场照片（用于确认或否定泄漏风险）。

### 2.4 过程聚合对象

- 事件（Incident）  
  聚合一次完整的泄漏处置过程（包含告警、任务、证据等）。

---

## 3. 对象关系定义（Relation）

> 说明：为便于与系统抽取结果对齐，关系类型建议使用小写枚举（has_sensor / related_to / in_state(or has_risk_state) / targets / has_evidence / contains）。

> 中文释义（建议理解为“关系类型”语义约束）：
> - has_sensor：拥有/挂载传感器（例：管段 has_sensor 传感器）
> - related_to：关联/相关（例：告警 related_to 管段）
> - in_state 或 has_risk_state：处于状态/拥有风险状态（例：管段 in_state 风险状态）
> - targets：目标/作用对象（例：运维任务 targets 管段）
> - has_evidence：拥有/附带证据（例：运维任务 has_evidence 证据）
> - contains：包含/聚合包含（例：事件 contains 告警/运维任务/证据）

- 管段（PipelineSegment） has_sensor 传感器（Sensor）
- 告警（Alarm） related_to 管段（PipelineSegment）
- 管段（PipelineSegment） in_state 风险状态（RiskState）
- 运维任务（MaintenanceTask） targets 管段（PipelineSegment）
- 运维任务（MaintenanceTask） has_evidence 证据（Evidence）
- 事件（Incident） contains 告警（Alarm）
- 事件（Incident） contains 运维任务（MaintenanceTask）
- 事件（Incident） contains 证据（Evidence）

> 为什么这样管理这些关系（建模原则说明）：
> 1. 以“管段”为核心对象，串起“感知→判定→处置→验证”的闭环：  
>    - 传感器（Sensor）与管段通过 `has_sensor` 固定挂载，明确感知来源；  
>    - 告警（Alarm）与管段通过 `related_to` 关联，表达“告警指向哪个管段”；  
>    - 风险状态（RiskState）与管段通过 `in_state/has_risk_state` 绑定，表达“管段当前处于什么风险状态”。
> 2. 任务与证据关系强语义化，便于追溯“处置是否完成、依据是否充分”：  
>    - 运维任务 `targets` 管段：明确任务的目标对象；  
>    - 运维任务 `has_evidence` 证据：明确任务产出/收集了哪些证据（用于规则判断）。
> 3. 用“事件（Incident）”做过程聚合，支持一次处置过程的整体查询与展示：  
>    - 事件 `contains` 告警/任务/证据：把同一次处置闭环的要素聚合到一个事件里，方便按事件视角检索和可视化。
> 4. 关系类型使用小写枚举，是为了“系统抽取一致 + 图谱查询稳定”：  
>    避免同义词造成重复关系（例如“包含/聚合/归属”混用），提升模型抽取稳定性与图数据库检索/统计的可重复性。

---

## 4. 状态定义（State）

### 4.1 风险状态类型（RiskState）

- 正常（Normal）
- 疑似泄漏（SuspectedLeak）
- 确认泄漏（ConfirmedLeak）

---

## 5. 行为定义（Behavior）

### 行为约束

- 每个行为必须作用于至少一个对象（affects ≥ 1）
- 本场景中，所有行为的核心作用对象为管段（PipelineSegment）
- 行为的结果必须引起状态变化或生成新对象/证据/任务

---

### 5.1 行为：异常识别（DetectAnomaly）

- 作用对象：管段（PipelineSegment）
- 输入对象：告警（Alarm）
- 触发条件：
  - 存在压力异常告警
  - 或存在流量异常告警
- 状态变化：正常（Normal） → 疑似泄漏（SuspectedLeak）
- 行为结果：生成“异常识别记录”（可作为产物/记录 Artifact）

---

### 5.2 行为：处置决策（DecideResponseAction）

- 作用对象：管段（PipelineSegment）
- 触发条件：风险状态（RiskState）= 疑似泄漏（SuspectedLeak）
- 行为结果：生成巡检运维任务（MaintenanceTask）

---

### 5.3 行为：执行与结果回写（ExecuteAndWriteBack）

- 作用对象：运维任务（MaintenanceTask），并关联管段（PipelineSegment）
- 输入对象：证据（Evidence）
- 状态变化规则：
  - 若证据充分：疑似泄漏（SuspectedLeak） → 确认泄漏（ConfirmedLeak）
  - 若证据不足：疑似泄漏（SuspectedLeak） → 正常（Normal）

---

## 6. 规则定义（Rule）

- Rule-1  
  IF 存在异常告警  
  THEN 允许执行 异常识别（DetectAnomaly） 行为

- Rule-2  
  IF 风险状态（RiskState）= 疑似泄漏（SuspectedLeak）  
  THEN 允许生成巡检任务（MaintenanceTask）

- Rule-3  
  IF 证据（Evidence）充分  
  THEN 风险状态可升级为 确认泄漏（ConfirmedLeak）

---

## 7. 行为闭环（Behavior Loop）

```text
告警（Alarm）
 → 异常识别（DetectAnomaly）
 → 风险状态（RiskState）= 疑似泄漏（SuspectedLeak）
 → 处置决策（DecideResponseAction）
 → 运维任务（MaintenanceTask）
 → 执行与回写（ExecuteAndWriteBack）
 → 风险状态（RiskState）= 确认泄漏（ConfirmedLeak）/ 正常（Normal）
