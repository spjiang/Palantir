# 行为建模背景（以行为为核心的本体论建模逻辑）

## 1. 核心原则：数据是结果，行为是原因

Palantir Ontology 的关键不在“把数据连起来”，而在“把数据为什么会变化、如何变化”建模出来。数据只是结果；**行为才是原因**。真正的价值来自把人脑中的经验判断变成：

- 可枚举的条件（preconditions）
- 可计算/可审计的规则（rules）
- 可回放的决策路径（decision trace）
- 可推演的行为链（behavior chain）

在产品中，本体图谱的“主角”必须是 **行为节点（Behavior）**，其它对象（管段、传感器、告警、工单、证据）都是行为发生的载体与输入输出。

## 2. 场景范围：单一运维点（便于闭环与抽取）

本项目聚焦 **一个且仅一个** 运维点：

- **油气管网运维：管道泄漏风险识别与处置（Leak Risk Handling）**

只做一个点的原因：必须把“条件→行为→状态迁移→证据/任务→回写”的闭环跑通，才能体现本体论价值，也便于大模型稳定抽取。

## 3. 产品级建模对象（以行为为中心组织）

### 3.1 对象（Object/Concept）

对象是行为的承载体，例如：PipelineSegment、Sensor、Alarm、MaintenanceTask、Evidence、Incident、Station。

对象不是“静态表”，必须具备三类信息：

- **状态属性**：当前状态（risk_state、pressure、flow、data_quality…）
- **约束条件**：不可违反的限制（审批、权限、时间窗、安全条件…）
- **行为接口**：允许发生的行为集合（哪些行为能作用于该对象）

### 3.2 状态（State）

状态是一级对象（不是一个字符串字段），用于表达“系统处于什么阶段”。例如 RiskState：

- Normal
- SuspectedLeak
- ConfirmedLeak
- Emergency

### 3.3 行为（Behavior）——核心灵魂

行为是一级对象，必须可视化、可解释、可审计、可推演。

每个行为至少包含：

- **preconditions**：触发条件（来自传感器/告警/人工确认/历史记录）
- **affects/targets**：作用对象（对谁做）
- **state_transition**：状态迁移（from_state → to_state）
- **produces**：产出（新告警/新任务/新证据/新记录）
- **owner & version**：责任归属与版本（产品化必备）

### 3.4 规则（Rule）

规则是行为的“闸门与约束”，用于解释“为什么允许/禁止某行为”。规则必须能回答：

- 触发条件是什么（trigger/when）
- 约束哪个行为（governs_behavior）
- 允许/禁止哪些行为（allows/forbids）
- 是否需要审批（approval_required）
- 需要哪些证据（required_evidence）

## 4. 行为建模要解决的三件事

### 4.1 数据是谁、在什么条件下、通过什么行为改变的？

行为 = 规则化的因果链：

```txt
preconditions（条件满足）
  ↓
Behavior（行为触发）
  ↓
StateTransition（状态变化）
  ↓
Artifact/Evidence/Task（新数据/新证据/新任务产生）
```

### 4.2 人脑经验如何显性化？

传统说法：

```txt
“这个情况一般要这么处理”
“经验上我们会优先这样”
“如果风险高，人工介入”
```

在 Ontology 产品中必须落为：

```txt
可枚举条件 + 可计算规则 + 可回溯证据链
```

### 4.3 行为必须可视化、可审计、可推演

不是“模型算出来了”，而是：

```txt
命中了哪些规则 → 允许/禁止了哪些行为 → 最终选择了哪个行为 → 产生了什么结果与证据
```

## 5. 产品落地结构（必须让人一眼看出是“行为建模产品”）

现实世界（油气管网运行）
  ↓
对象抽象（Object + State + Constraints + Interfaces）
  ↓
行为建模（Behavior + Rules + StateTransitions + Artifacts）
  ↓
可推演的世界模型（Ontology Graph）
  ↓
大模型推理（只读本体，受规则约束输出可执行行为集合）
  ↓
Agent 决策与执行（下发任务/审批/回写证据）
  ↓
现实世界变化 → 新数据回流（形成闭环）

## 6. 面向“泄漏风险处置”的最小闭环（单点运维样板）

传感器/告警（结果）
  ↓
DetectAnomaly（异常识别：Normal→SuspectedLeak）
  ↓
AssessLeakRisk（风险评估：SuspectedLeak→ConfirmedLeak/Normal）
  ↓
DecideResponseAction（处置决策：在允许的行为集合中选择）
  ↓
ExecuteMaintenance（执行处置：生成任务/证据）
  ↓
WriteBack（回写与结案：状态更新/告警关闭/事件归档）

## 7. 大模型抽取要求（必须以行为为中心）

大模型输出优先级必须是：

1. behaviors（行为）与 state_transitions（状态迁移）
2. rules（规则：约束/审批/证据）
3. entities/relations（对象与结构关系）

并且必须把关键行为抽成一级节点（Behavior），把 RiskState 抽成一级节点（State），把“任务/证据/记录”抽成产物节点（Artifact/Evidence），形成可回放的因果链。
